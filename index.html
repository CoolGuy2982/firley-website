<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firley - Eco Technology</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        /* Global Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Google Sans', sans-serif;
            overflow-x: hidden;
        }

        .custom-bg {
            background: radial-gradient(circle at 55% -25%, #2E1A47 10%, #000 50%);
            min-height: 100vh;
            width: 100%;
            color: #fff;
        }

        /* Navbar Styles */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 10;
            backdrop-filter: none;
            background: transparent;
            transition: backdrop-filter 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 3rem;
        }

        .navbar.scrolled {
            backdrop-filter: blur(15px);
            background: rgba(0, 0, 0, 0.7);
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
        }

        .navbar a {
            font-size: 1rem;
            font-weight: 400;
            color: #9CA3AF;
            margin: 0 1rem;
            text-decoration: none;
            transition: color 0.2s;
        }

        .navbar a:hover {
            color: #ffffff;
        }

        .navbar a.active {
            color: #ffffff;
            border-bottom: 2px solid #9F7AEA; /* Lavender equivalent */
        }

        /* Hero Section */
        .hero-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            min-height: calc(100vh - 120px);
            padding-bottom: 15vh;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1s ease, transform 1s ease;
            text-align: center;
        }

        .hero-section.loaded {
            opacity: 1;
            transform: translateY(0);
        }

        .title {
            font-size: 6rem;
            font-weight: 400;
            line-height: 1.2;
            color: #ffffff;
            margin: 0;
            opacity: 0;
            transform: translateY(-20px);
            animation: fadeIn 1s forwards;
        }

        .subtitle,
        .button-container {
            opacity: 0;
            transform: translateY(20px);
        }

        .subtitle {
            animation: fadeIn 1s 0.5s forwards;
        }

        .button-container {
            animation: fadeIn 1s 0.7s forwards;
            margin-top: 2rem;
        }

        .button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.85rem 2.5rem;
            border-radius: 14px;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease-in-out;
            text-decoration: none;
        }

        .button-blue {
            background: linear-gradient(to right, #B794F4, #9F7AEA); /* Lavender gradient */
            color: white;
            box-shadow: 0 4px 10px rgba(159, 122, 234, 0.3);
        }

        .button-blue:hover {
            background: #9F7AEA;
        }

        .button-outline {
            border: 1px solid #9CA3AF;
            color: #9CA3AF;
            background: transparent;
        }

        .button-outline:hover {
            border-color: #ffffff;
            color: #ffffff;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Lower Section */
        .lower-section {
            text-align: center;
            padding: 4rem 2rem;
            font-size: 2.25rem;
            font-weight: 400;
            max-width: 900px;
            margin: 45vh auto 0 auto;
            line-height: 1.6;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem;
        }

        .lower-section span {
            color: black;
            opacity: 0.2;
            transition: color 0.15s ease, opacity 0.15s ease;
        }

        .lower-section span.gray {
            color: rgba(186, 162, 245, 0.5); /* Shadowed lavender effect */
            opacity: 0.8;
        }

        .lower-section span.blue {
            color: #D6BCFA; /* Softer lavender */
            opacity: 1;
        }

        /* Cards Container */
        .cards-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            margin: 0 auto;
            flex-wrap: wrap;
            max-width: 1200px;
            padding: 0 2rem;
        }

        /* Card Styles */
        .card-container {
            position: relative;
            width: 350px;
            height: 420px;
            background: linear-gradient(135deg, #2E1A47, #1A0A29); /* Dark lavender tones */
            border-radius: 1rem;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
            perspective: 1200px;
            transform-style: preserve-3d;
            transition: transform 0.6s ease, box-shadow 0.6s ease;
            cursor: pointer;
        }

        .card-container:hover {
            transform: rotateX(0deg) rotateY(0deg) scale(1.05);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.8);
        }

        .card-container img {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translate(-50%, -50%) translateZ(50px);
            width: 120px;
            height: 120px;
            z-index: 2;
            object-fit: cover;
            border-radius: 50%;
            border: 2px solid #ffffff;
        }

        .card-container div.content {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: rgba(18, 18, 18, 0.9);
            padding: 1rem;
            text-align: left;
            color: #fff;
            transform: translateZ(20px);
            z-index: 1;
        }

        .card-container h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1.25rem;
            font-weight: 600;
        }

        .card-container p {
            margin: 0;
            font-size: 0.9rem;
            color: #a1a1a1;
        }

        .card-container .card-icon {
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-size: 1rem;
            color: #cfcfcf;
            transition: color 0.3s ease;
        }

        .card-container:hover .card-icon {
            color: #F3E8FF; /* Lighter lavender */
        }

        /* Carousel Section */
        #three-card-carousel {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background-color: #000; /* Ensure background matches */
        }

        /* Swiper Styles */
        .swiper-container {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 0 !important; /* Remove Swiper's internal padding */
        }

        .swiper-slide {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease, opacity 0.3s ease;
            position: relative;
            width: auto; /* Let Swiper handle width based on slidesPerView */
        }

        .card {
            width: 500px;
            height: 500px;
            background-color: #f0f0f0;
            border: 5px solid transparent;
            border-radius: 25px; /* More rounded corners */
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s ease;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            backface-visibility: hidden;
            overflow: hidden;
            position: relative;
        }

        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Changed from fill to cover */
            display: block;
            border-radius: 25px; /* Match card's rounded corners */
        }

        /* Description Styles */
        .description {
            margin-top: 20px;
            font-size: 1.2rem;
            color: #333;
            opacity: 0; /* Hidden by default */
            transition: opacity 0.3s ease;
            text-align: center;
            width: 500px;
        }

        /* Active (centered) slide */
        .swiper-slide-active .card {
            transform: scale(1) rotate(0deg) translateY(-20px); /* Slightly higher */
            opacity: 1;
            border-color: #007BFF; /* Highlight active card border */
            z-index: 3;
        }

        .swiper-slide-active .description {
            opacity: 1; /* Show description when active */
            color: #fff; /* Ensure text is visible on dark background */
        }

        /* Previous slide */
        .swiper-slide-prev .card {
            transform: scale(0.85) rotate(-20deg) translateY(0px);
            opacity: 0.7;
            z-index: 2;
        }

        .swiper-slide-prev .description {
            opacity: 0; /* Hide description when not active */
        }

        /* Next slide */
        .swiper-slide-next .card {
            transform: scale(0.85) rotate(20deg) translateY(0px);
            opacity: 0.7;
            z-index: 2;
        }

        .swiper-slide-next .description {
            opacity: 0; /* Hide description when not active */
        }

        /* Other slides */
        .swiper-slide:not(.swiper-slide-active):not(.swiper-slide-prev):not(.swiper-slide-next) .card {
            transform: scale(0.5) translateY(100px);
            opacity: 0.3;
            z-index: 1;
        }

        /* Hover effect */
        .card:hover {
            border-color: #0056b3; /* Darker blue on hover */
            cursor: pointer;
        }

        /* Navigation Arrows */
        .swiper-button-next,
        .swiper-button-prev {
            color: #000;
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            top: 50%;
            transform: translateY(-50%);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .swiper-button-next::after,
        .swiper-button-prev::after {
            font-size: 24px;
        }

        /* Pagination Dots */
        .swiper-pagination-bullet {
            background: #000;
            opacity: 0.7;
            width: 14px;
            height: 14px;
            margin: 0 6px !important;
        }

        .swiper-pagination-bullet-active {
            background: #000;
            opacity: 1;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .card {
                width: 350px;
                height: 350px;
            }

            .description {
                width: 350px;
                font-size: 1rem;
            }

            .swiper-button-next,
            .swiper-button-prev {
                width: 50px;
                height: 50px;
            }

            .swiper-button-next::after,
            .swiper-button-prev::after {
                font-size: 20px;
            }
        }

        @media (max-width: 480px) {
            .card {
                width: 250px;
                height: 250px;
            }

            .description {
                width: 250px;
                font-size: 0.9rem;
            }

            .swiper-button-next,
            .swiper-button-prev {
                width: 40px;
                height: 40px;
            }

            .swiper-button-next::after,
            .swiper-button-prev::after {
                font-size: 16px;
            }
        }
    </style>
</head>
<body class="custom-bg">

    <!-- Navbar -->
    <header class="navbar flex justify-between items-center px-12 py-4">
        <h1 class="text-lg font-medium">Firley</h1>
        <nav class="flex">
            <a href="#" class="active">Home</a>
            <a href="#" class="hover:text-white">Firley models</a>
            <a href="#" class="hover:text-white">Ultra</a>
            <a href="#" class="hover:text-white">Pro</a>
            <a href="#" class="hover:text-white">Nano</a>
        </nav>
    </header>

    <!-- Hero Section -->
    <main class="hero-section text-center" id="hero">
        <h1 class="title">Microlens</h1>
        <p class="subtitle">Lightweight models, two variants, both optimized for speed and efficiency</p>
        <div class="button-container flex justify-center space-x-6 mt-8">
            <a href="#" class="button button-blue">
                Try the Free Microlens App &rarr;
            </a>
        </div>
    </main>

    <!-- Lower Text Section -->
    <section class="lower-section" id="lowerText">
        <span>Lightweight,</span>
        <span>fast</span>
        <span>and</span>
        <span>cost-efficient</span>
        <span>models</span>
        <span>featuring</span>
        <span>multimodal</span>
        <span>reasoning</span>
        <span>and</span>
        <span>a</span>
        <span>breakthrough</span>
        <span>long</span>
        <span>context</span>
        <span>window</span>
        <span>of</span>
        <span>up</span>
        <span>to</span>
        <span>one</span>
        <span>million</span>
        <span>tokens.</span>
    </section>

    <section style="padding: 4rem 2rem; text-align: center; margin-top: 15vh;">
        <h2 style="font-size: 2rem; font-weight: 500; margin-bottom: 1rem; color: #fff;">Small, smaller</h2>
        <p style="font-size: 1rem; font-weight: 400; color: #a1a1a1; margin-bottom: 4rem;">
            Flash now comes in two compact variants, giving you the flexibility for whatever you choose to build.
        </p>
        <div style="display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap; max-width: 1200px; margin: 0 auto;">
            <!-- Card 1 -->
            <div class="card-container" style="
                position: relative;
                width: 350px;
                height: 420px;
                background: linear-gradient(135deg, #2E1A47, #1A0A29); /* Dark lavender tones */
                border-radius: 1rem;
                overflow: hidden;
                border: 1px solid rgba(255, 255, 255, 0.1);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
                perspective: 1200px;
                transform-style: preserve-3d;
                transition: transform 0.6s ease, box-shadow 0.6s ease;
                cursor: pointer;
            "
            onmousemove="applyParallaxEffect(event, this)"
            onmouseleave="resetParallaxEffect(this)">
                <img src="https://placehold.co/120x120/000000/FFFFFF?text=1.5" 
                    alt="1.5 Flash" 
                    style="position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%) translateZ(50px); width: 120px; height: 120px; z-index: 2;">
                <div style="
                    position: absolute;
                    bottom: 0;
                    width: 100%;
                    background: #121212;
                    padding: 1rem;
                    text-align: left;
                    color: #fff;
                    transform: translateZ(20px);
                    z-index: 1;
                ">
                    <h3 style="margin: 0 0 0.5rem; font-size: 1.25rem; font-weight: 600;">1.5 Flash</h3>
                    <p style="margin: 0; font-size: 0.9rem; color: #a1a1a1;">
                        Our lightweight model, optimized for tasks where speed and efficiency matter the most.
                    </p>
                </div>
            </div>
    
            <!-- Card 2 -->
            <div class="card-container" style="
                position: relative;
                width: 350px;
                height: 420px;
                background: linear-gradient(135deg, #1A0A29, #2E1A47); /* Reversed dark lavender tones */
                border-radius: 1rem;
                overflow: hidden;
                border: 1px solid rgba(255, 255, 255, 0.1);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
                perspective: 1200px;
                transform-style: preserve-3d;
                transition: transform 0.6s ease, box-shadow 0.6s ease;
                cursor: pointer;
            "
            onmousemove="applyParallaxEffect(event, this)"
            onmouseleave="resetParallaxEffect(this)">
                <img src="https://placehold.co/120x120/000000/FFFFFF?text=8B" 
                    alt="1.5 Flash-8B" 
                    style="position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%) translateZ(50px); width: 120px; height: 120px; z-index: 2;">
                <div style="
                    position: absolute;
                    bottom: 0;
                    width: 100%;
                    background: #121212;
                    padding: 1rem;
                    text-align: left;
                    color: #fff;
                    transform: translateZ(20px);
                    z-index: 1;
                ">
                    <h3 style="margin: 0 0 0.5rem; font-size: 1.25rem; font-weight: 600;">1.5 Flash-8B</h3>
                    <p style="margin: 0; font-size: 0.9rem; color: #a1a1a1;">
                        Our smaller, faster and most cost-efficient Flash model.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Performance Section -->
    <section style="padding: 6rem 2rem; background-color: #000; color: #fff; text-align: center; margin-top: 30vh;">
        <h2 style="font-size: 2.5rem; font-weight: 500; margin-bottom: 1rem;">Performance in a flash</h2>
        <p style="font-size: 1rem; font-weight: 400; color: #a1a1a1; margin-bottom: 4rem;">
            Designed to be fast and efficient to serve at scale.
        </p>
        <div style="display: flex; justify-content: center; gap: 2.5rem; flex-wrap: wrap; max-width: 1200px; margin: 0 auto;">
            <!-- Card 1 -->
            <div style="background-color: #161616; border-radius: 1rem; border: 1px solid #333; padding: 2.5rem; flex: 1; min-width: 280px; max-width: 360px; text-align: center; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);">
                <img src="https://placehold.co/80x80/2563EB/FFFFFF?text=Speed" alt="Built for speed icon" style="display: block; margin: 0 auto 1.5rem;">
                <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem;">Built for speed</h3>
                <p style="font-size: 0.95rem; font-weight: 400; color: #cfcfcf; line-height: 1.5;">
                    Sub-second average first-token latency for the vast majority of developer and enterprise use cases.
                </p>
            </div>

            <!-- Card 2 -->
            <div style="background-color: #161616; border-radius: 1rem; border: 1px solid #333; padding: 2.5rem; flex: 1; min-width: 280px; max-width: 360px; text-align: center; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);">
                <img src="https://placehold.co/80x80/2563EB/FFFFFF?text=Quality" alt="Quality at lower cost icon" style="display: block; margin: 0 auto 1.5rem;">
                <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem;">Quality at lower cost</h3>
                <p style="font-size: 0.95rem; font-weight: 400; color: #cfcfcf; line-height: 1.5;">
                    On most common tasks, 1.5 Flash models achieve comparable quality to larger models, at a fraction of the cost.
                </p>
            </div>

            <!-- Card 3 -->
            <div style="background-color: #161616; border-radius: 1rem; border: 1px solid #333; padding: 2.5rem; flex: 1; min-width: 280px; max-width: 360px; text-align: center; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);">
                <img src="https://placehold.co/80x80/2563EB/FFFFFF?text=Context" alt="Long-context understanding icon" style="display: block; margin: 0 auto 1.5rem;">
                <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem;">Long-context understanding</h3>
                <p style="font-size: 0.95rem; font-weight: 400; color: #cfcfcf; line-height: 1.5;">
                    Process hours of video and audio, and hundreds of thousands of words or lines of code.
                </p>
            </div>
        </div>
    </section>

    <!-- Demo Section -->
    <section style="padding: 4rem 2rem; background-color: #000; color: #fff; text-align: center;">
        <h3 style="font-size: 1rem; font-weight: 400; color: #a1a1a1; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 1rem;">
            Demo
        </h3>
        <h2 style="font-size: 3rem; font-weight: 500; margin-bottom: 1.5rem; color: #fff;">
            Longer context
        </h2>
        <p style="font-size: 1rem; font-weight: 400; line-height: 1.75; color: #a1a1a1; max-width: 800px; margin: 0 auto;">
            1.5 Pro introduces a breakthrough context window of up to two million tokens â€” the longest context window of any large-scale foundation model yet. It achieves near-perfect recall on long-context retrieval tasks across modalities, unlocking the ability to accurately process large-scale documents, thousands of lines of code, hours of audio, video, and more.
        </p>
    </section>

    <!-- Full-Screen Centered Three-Card Carousel Section -->
    <section id="three-card-carousel">
        <!-- Swiper CSS -->
        <link
            rel="stylesheet"
            href="https://unpkg.com/swiper@9/swiper-bundle.min.css"
        />
    
        <!-- Carousel Container -->
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <!-- Slide 1 -->
                <div class="swiper-slide">
                    <div class="card">
                        <img src="images/segment1.png" alt="Segmented Blood Smear" class="card-image" onclick="openModal('images/segment1.png', 'bloodSmear')">
                    </div>
                    <p class="description">Segmented Blood Smear</p>
                </div>
                <!-- Slide 2 -->
                <div class="swiper-slide">
                    <div class="card">
                        <img src="images/image2.png" alt="Image 2" class="card-image" onclick="openModal('images/image2.png', 'anotherImage')">
                    </div>
                    <p class="description">Image 2 Description</p>
                </div>
                <!-- Slide 3 -->
                <div class="swiper-slide">
                    <div class="card">
                        <img src="images/image3.png" alt="Image 3" class="card-image" onclick="openModal('images/image3.png', 'thirdImage')">
                    </div>
                    <p class="description">Image 3 Description</p>
                </div>
            </div>
            <!-- Navigation Arrows -->
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
            <!-- Pagination Dots -->
            <div class="swiper-pagination"></div>
        </div>
    
        <!-- Modal for Interaction -->
        <div id="modal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <img id="modal-image" src="" alt="Segmented Image" class="modal-image">
                <p id="ai-response" class="ai-response">Hover over a highlighted region to learn more!</p>
            </div>
        </div>
    
        <!-- Swiper JS -->
        <script src="https://unpkg.com/swiper@9/swiper-bundle.min.js"></script>
    
        <!-- Styles -->
        <style>
            /* Swiper Container */
            .swiper-container {
                width: 100%;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                position: relative;
            }
    
            .swiper-slide {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                transition: transform 0.3s ease, opacity 0.3s ease;
                position: relative;
                width: auto;
            }
    
            /* Card Styles */
            .card {
                width: 500px;
                height: 500px;
                background-color: #f0f0f0;
                border: 5px solid transparent;
                border-radius: 25px;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.5s ease;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
                overflow: hidden;
            }
    
            .card-image {
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 25px;
                cursor: pointer; /* Indicate clickable */
            }
    
            /* Description Styles */
            .description {
                margin-top: 20px;
                font-size: 1.2rem;
                color: #333;
                opacity: 0;
                transition: opacity 0.3s ease;
                text-align: center;
                width: 500px;
            }
    
            .swiper-slide-active .card {
                transform: scale(1) translateY(-20px);
                opacity: 1;
                border-color: #007BFF;
            }
    
            .swiper-slide-active .description {
                opacity: 1;
                color: #fff;
            }
    
            /* Navigation Arrows */
            .swiper-button-next,
            .swiper-button-prev {
                color: #000;
                width: 60px;
                height: 60px;
                background: rgba(255, 255, 255, 0.8);
                border-radius: 50%;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            }
    
            /* Modal Styles */
            .modal {
                display: none;
                position: fixed;
                z-index: 1000;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.8);
                backdrop-filter: blur(5px);
            }
    
            .modal-content {
                margin: 5% auto;
                padding: 20px;
                width: 80%;
                background-color: black;
                color: white;
                border-radius: 10px;
                text-align: center;
                position: relative;
            }
    
            .modal-image {
                max-width: 90%;
                border: 2px solid #ccc;
                margin-bottom: 20px;
                cursor: crosshair; /* Indicate hoverable */
            }
    
            .ai-response {
                font-size: 1.2rem;
                margin-top: 10px;
            }
    
            .close {
                position: absolute;
                top: 10px;
                right: 20px;
                font-size: 24px;
                cursor: pointer;
                color: white;
            }
        </style>
    
        <!-- JavaScript -->
        <script>
            // Define color mappings to AI responses for each image
            const aiResponsesMap = {
                bloodSmear: {
                    "255,0,0": "The bright red dots are red blood cells. They carry oxygen all around our body!",
                    "0,255,0": "The green areas indicate white blood cells. They are the defenders of our body, ready to fight off infections!",
                    "0,0,255": "The blue outlines highlight platelets. These are like band-aids inside your body, helping to stop bleeding!"
                },
                anotherImage: {
                    // Add color responses for another image
                },
                thirdImage: {
                    // Add color responses for the third image
                }
            };
    
            let currentImageKey = ""; // Tracks the current image's response set
            let cachedCanvas = null; // Cache the canvas to improve performance
    
            // Open Modal
            function openModal(imageSrc, imageKey) {
                const modal = document.getElementById("modal");
                const modalImage = document.getElementById("modal-image");
                modal.style.display = "block";
    
                currentImageKey = imageKey; // Update the current image's key
    
                // Clear previous AI response
                document.getElementById("ai-response").textContent = "Hover over a highlighted region to learn more!";
    
                // Remove any existing crossorigin attribute for local images
                modalImage.removeAttribute("crossorigin");
    
                // Set the image source
                modalImage.src = imageSrc;
    
                // Ensure the image is loaded before any processing
                modalImage.onload = () => {
                    // Initialize or clear the cached canvas
                    cachedCanvas = document.createElement("canvas");
                    const ctx = cachedCanvas.getContext("2d");
                    cachedCanvas.width = modalImage.naturalWidth;
                    cachedCanvas.height = modalImage.naturalHeight;
                    ctx.drawImage(modalImage, 0, 0, cachedCanvas.width, cachedCanvas.height);
                };
    
                // Handle image loading errors
                modalImage.onerror = () => {
                    console.error("Failed to load image:", imageSrc);
                    document.getElementById("ai-response").textContent = "Failed to load image.";
                    cachedCanvas = null;
                };
            }
    
            // Close Modal
            function closeModal() {
                const modal = document.getElementById("modal");
                modal.style.display = "none";
                document.getElementById("ai-response").textContent = "Hover over a highlighted region to learn more!";
                cachedCanvas = null; // Clear the cached canvas
            }
    
            // Handle hover detection over the modal image
            document.getElementById("modal").addEventListener("mousemove", (event) => {
                const modalImage = document.getElementById("modal-image");
                const rect = modalImage.getBoundingClientRect();
    
                // Ensure the hover is within the modal image
                if (
                    event.clientX < rect.left ||
                    event.clientX > rect.right ||
                    event.clientY < rect.top ||
                    event.clientY > rect.bottom
                ) {
                    document.getElementById("ai-response").textContent = "Hover over a highlighted region to learn more!";
                    return;
                }
    
                // If the canvas is not cached yet, return
                if (!cachedCanvas) {
                    document.getElementById("ai-response").textContent = "Hover over a highlighted region to learn more!";
                    return;
                }
    
                const ctx = cachedCanvas.getContext("2d");
    
                // Calculate scale factors to map mouse coordinates correctly
                const scaleX = cachedCanvas.width / rect.width;
                const scaleY = cachedCanvas.height / rect.height;
    
                const x = Math.floor((event.clientX - rect.left) * scaleX);
                const y = Math.floor((event.clientY - rect.top) * scaleY);
    
                try {
                    const pixel = ctx.getImageData(x, y, 1, 1).data;
                    const colorKey = `${pixel[0]},${pixel[1]},${pixel[2]}`;
    
                    const aiResponse = aiResponsesMap[currentImageKey]?.[colorKey];
                    if (aiResponse) {
                        document.getElementById("ai-response").textContent = aiResponse;
                    } else {
                        document.getElementById("ai-response").textContent = "Hover over a highlighted region to learn more!";
                    }
                } catch (error) {
                    // Handle potential errors, such as cross-origin issues
                    console.error("Error accessing pixel data:", error);
                    document.getElementById("ai-response").textContent = "Cannot access pixel data.";
                }
            });
    
            // Close modal when clicking outside the modal content
            window.addEventListener('click', function(event) {
                const modal = document.getElementById("modal");
                if (event.target == modal) {
                    closeModal();
                }
            });
        </script>
    
        <!-- Carousel Initialization Script -->
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const swiper = new Swiper('.swiper-container', {
                    // Basic Swiper parameters
                    initialSlide: 1, // Start from the middle slide
                    slidesPerView: 3,
                    centeredSlides: true,
                    spaceBetween: 150, // Increased spacing for better arch effect
                    loop: false,
                    resistance: true,
                    grabCursor: true,
                    allowTouchMove: true,
    
                    // Keyboard control
                    keyboard: {
                        enabled: true,
                        onlyInViewport: true,
                    },
    
                    // Pagination (dots)
                    pagination: {
                        el: '.swiper-pagination',
                        clickable: true,
                    },
    
                    // Navigation arrows
                    navigation: {
                        nextEl: '.swiper-button-next',
                        prevEl: '.swiper-button-prev',
                    },
    
                    // Transition speed
                    speed: 600,
    
                    // Breakpoints for responsiveness
                    breakpoints: {
                        0: {
                            slidesPerView: 1,
                            spaceBetween: 50,
                        },
                        768: {
                            slidesPerView: 3,
                            spaceBetween: 150,
                        },
                    },
    
                    // Enable smooth resistance when dragging
                    resistanceRatio: 0.85,
    
                    // Event listeners to handle description visibility
                    on: {
                        slideChangeTransitionStart: function () {
                            updateDescriptions();
                        },
                        slideChangeTransitionEnd: function () {
                            updateDescriptions();
                        },
                    },
                });
    
                // Function to update descriptions based on active slide
                function updateDescriptions() {
                    const slides = document.querySelectorAll('.swiper-slide');
                    slides.forEach((slide) => {
                        const description = slide.querySelector('.description');
                        if (slide.classList.contains('swiper-slide-active')) {
                            description.style.opacity = '1';
                            description.style.color = '#fff'; // Ensure visibility on dark background
                        } else {
                            description.style.opacity = '0';
                            description.style.color = '#333';
                        }
                    });
                }
    
                // Initial call to set descriptions correctly
                updateDescriptions();
    
                // Optional: Adjust Swiper on window resize
                window.addEventListener('resize', () => {
                    swiper.update();
                });
            });
        </script>
    </section>
    

    <!-- Additional Scripts -->
    <script>
        const navbar = document.querySelector('.navbar');
        const lowerSection = document.querySelector('.lower-section');
        const heroSection = document.querySelector('.hero-section');
        const words = lowerSection.querySelectorAll('span');

        window.addEventListener('scroll', () => {
            const lowerTextPosition = lowerSection.getBoundingClientRect().top;
            const windowHeight = window.innerHeight;

            words.forEach((word, index) => {
                const wordTriggerPosition = windowHeight - (index * 25);
                if (lowerTextPosition < wordTriggerPosition) {
                    for (let i = 0; i <= index; i++) {
                        words[i].classList.add('blue');
                        words[i].classList.remove('gray');
                    }
                } else if (lowerTextPosition < wordTriggerPosition + 50) {
                    word.classList.add('gray');
                    word.classList.remove('blue');
                } else {
                    word.classList.remove('blue', 'gray');
                }
            });

            if (window.scrollY > 100) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        window.addEventListener('load', () => {
            heroSection.classList.add('loaded');
        });
    </script>
</body>
</html>
